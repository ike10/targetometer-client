{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/oche/Projects/Targetometer/Client/context/AuthContext.js\";\nimport { createContext, useContext, useState } from \"react\";\nimport router, { useRouter } from 'next/router';\nimport axios from \"axios\";\nconst AuthContextDefaultValues = {\n  user: []\n};\nconst AuthContext = /*#__PURE__*/createContext(AuthContextDefaultValues);\nconst BASE_URL = 'https://targetometer-server.herokuapp.com/api/v1/auth';\nexport function useAuth() {\n  return useContext(AuthContext);\n}\nexport function AuthProvider({\n  children\n}) {\n  const {\n    0: user,\n    1: setUser\n  } = useState([]);\n  const {\n    0: userInfo,\n    1: setUserInfo\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false); // const [single_route, setSingle_route] = useState([])\n\n  const {\n    0: serverMessage,\n    1: setServerMessage\n  } = useState('');\n\n  const sign_up = async (email, password, firstname, lastname, confirmpassword) => {\n    try {\n      let response = await fetch(`${BASE_URL}/createaccount`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n        },\n        body: JSON.stringify({\n          firstname: firstname,\n          lastname: lastname,\n          password: password,\n          email: email\n        })\n      });\n      setIsLoading(true);\n      const result = await response.json(); // console.log(result)\n\n      setServerMessage(\"Account Created Successfully, please login to access dashboard\");\n      setTimeout(() => {\n        router.push(`/`);\n      }, 30000);\n    } catch (err) {\n      setServerMessage(err.message);\n      setIsLoading(false);\n    } //     fetch(`${BASE_URL}/createaccount`, {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //             // 'Content-Type': 'application/x-www-form-urlencoded',\n    //           },\n    //         body: JSON.stringify({\n    //             firstname: firstname,\n    //             lastname: lastname,\n    //             password: password,\n    //             email:email, \n    //         })\n    //     })\n    //     .then(response => response.json())\n    //     .then(data => {\n    //     setServerMessage(\"Account Created Successfully, please login to access dashboard\")\n    //     setTimeout(()=>{\n    //         router.push(`/`)\n    //     }, 30000)\n    //    })\n    //     .catch(err=>{\n    //         setServerMessage(err.message)\n    //     })\n\n  };\n\n  const sign_in = async (email, password) => {\n    try {\n      let response = await fetch(`${BASE_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n        },\n        body: JSON.stringify({\n          password: password,\n          email: email\n        })\n      });\n      setIsLoading(true);\n      const result = await response.json(); // console.log(result)\n\n      localStorage.setItem('token', result.token);\n      setUser(result.data);\n      localStorage.setItem('firstname', result.data.firstname);\n      localStorage.setItem('lastname', result.data.lastname);\n      localStorage.setItem('userID', result.data.userID);\n      const firstname = localStorage.getItem('firstname');\n      const lastname = localStorage.getItem('lastname');\n      setServerMessage(result.message);\n      router.push(`/${firstname}_${lastname}`);\n    } catch (err) {\n      setServerMessage(err.message);\n      setIsLoading(false);\n    } // fetch(`${BASE_URL}/login`, {\n    //     method: 'POST',\n    //     headers: {\n    //         'Content-Type': 'application/json'\n    //         // 'Content-Type': 'application/x-www-form-urlencoded',\n    //       },\n    //     body: JSON.stringify({\n    //         password: password,\n    //         email:email, \n    //     })\n    // })\n    //     .then(response => response.json())\n    //     .then(result => {\n    //      localStorage.setItem('token', result.token)\n    //     setUser(result.data)\n    //     localStorage.setItem('firstname', result.data.firstname )\n    //     localStorage.setItem('lastname',result.data.lastname)\n    //     localStorage.setItem('userID', result.data.userID)\n    //     const firstname = localStorage.getItem('firstname')\n    //     const lastname = localStorage.getItem('lastname')\n    //     setServerMessage(result.message)\n    //     router.push(`/${firstname}_${lastname}`)\n    //    })\n    //     .catch(err=>{\n    //         setServerMessage(err.message)\n    //     })\n    //     const result = response.json()\n    //     console.log(result)\n    //     await localStorage.setItem('token', result.data.token)\n    //     await localStorage.setItem('user', result.data.user)\n    //     setServerMessage(result.data.message)\n    //     router.push(`/:${user.name}`)\n    //   }catch(err){\n    //     setServerMessage(err.message)\n    //   }\n\n  }; // const get_single_route = (routeId) =>{\n  //     console.log(routeId)\n  //     let url = `https://backend.cruise9ja.com/api/v1/routes/${abuwala1}`\n  //     fetch(url)\n  //       .then(response => response.json())\n  //       .then(data => {\n  //           console.log(data)\n  //           setSingle_route([...data.result])\n  //           console.log(single_route)\n  //       })\n  //       .catch(err => {\n  //           setErrorMessage(err.message)\n  //         })\n  //     // const router = useRouter()\n  //     // router.push('/searchresults')\n  // }\n\n\n  const value = {\n    user,\n    sign_in,\n    sign_up,\n    serverMessage,\n    isLoading\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"sources":["/Users/oche/Projects/Targetometer/Client/context/AuthContext.js"],"names":["createContext","useContext","useState","router","useRouter","axios","AuthContextDefaultValues","user","AuthContext","BASE_URL","useAuth","AuthProvider","children","setUser","userInfo","setUserInfo","isLoading","setIsLoading","serverMessage","setServerMessage","sign_up","email","password","firstname","lastname","confirmpassword","response","fetch","method","headers","body","JSON","stringify","result","json","setTimeout","push","err","message","sign_in","localStorage","setItem","token","data","userID","getItem","value"],"mappings":"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","sourcesContent":["import { createContext, useContext, useState } from \"react\";\nimport router, {useRouter} from 'next/router'\nimport axios from \"axios\";\nconst AuthContextDefaultValues={\n    user:[],\n \n   \n}\n\nconst AuthContext = createContext(AuthContextDefaultValues)\n\nconst BASE_URL = 'https://targetometer-server.herokuapp.com/api/v1/auth'\nexport function useAuth(){\n    return useContext(AuthContext)\n}\n\nexport function AuthProvider({children}){\n    const [user, setUser] = useState([])\n    const [userInfo, setUserInfo] = useState([])\n    const [isLoading, setIsLoading] = useState(false)\n    // const [single_route, setSingle_route] = useState([])\n    const [serverMessage, setServerMessage] = useState('')\n    const sign_up =  async(email, password, firstname, lastname, confirmpassword) =>{\n\n        try{\n            let response = await fetch(`${BASE_URL}/createaccount`, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                            // 'Content-Type': 'application/x-www-form-urlencoded',\n                          },\n                        body: JSON.stringify({\n                            firstname: firstname,\n                            lastname: lastname,\n                            password: password,\n                            email:email, \n                            \n                        })\n                   })\n                   setIsLoading(true)\n                const result = await response.json()\n                // console.log(result)\n               \n                setServerMessage(\"Account Created Successfully, please login to access dashboard\")\n                setTimeout(()=>{\n                            router.push(`/`)\n                        }, 30000)\n        }catch(err){\n            setServerMessage(err.message)\n            setIsLoading(false)\n        }\n\n\n    //     fetch(`${BASE_URL}/createaccount`, {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //             // 'Content-Type': 'application/x-www-form-urlencoded',\n    //           },\n    //         body: JSON.stringify({\n    //             firstname: firstname,\n    //             lastname: lastname,\n    //             password: password,\n    //             email:email, \n                \n    //         })\n    //     })\n    //     .then(response => response.json())\n    //     .then(data => {\n           \n    //     setServerMessage(\"Account Created Successfully, please login to access dashboard\")\n    //     setTimeout(()=>{\n    //         router.push(`/`)\n    //     }, 30000)\n        \n    //    })\n    //     .catch(err=>{\n    //         setServerMessage(err.message)\n    //     })\n    }\n    const sign_in = async (email, password) =>{\n\n       try{\n            let response = await fetch(`${BASE_URL}/login`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                    // 'Content-Type': 'application/x-www-form-urlencoded',\n                  },\n                body: JSON.stringify({\n                    \n                    password: password,\n                    email:email, \n                   \n               })\n            })\n            setIsLoading(true)\n            const result = await response.json()\n            // console.log(result)\n           \n            localStorage.setItem('token', result.token)\n        \n            setUser(result.data)\n            localStorage.setItem('firstname', result.data.firstname )\n            localStorage.setItem('lastname',result.data.lastname)\n            localStorage.setItem('userID', result.data.userID)\n    \n            \n            const firstname = localStorage.getItem('firstname')\n            const lastname = localStorage.getItem('lastname')\n            \n            setServerMessage(result.message)\n            router.push(`/${firstname}_${lastname}`)\n       } catch(err){\n        setServerMessage(err.message) \n        setIsLoading(false)\n       }\n        \n        // fetch(`${BASE_URL}/login`, {\n        //     method: 'POST',\n        //     headers: {\n        //         'Content-Type': 'application/json'\n        //         // 'Content-Type': 'application/x-www-form-urlencoded',\n        //       },\n        //     body: JSON.stringify({\n                \n        //         password: password,\n        //         email:email, \n               \n        //     })\n        // })\n    //     .then(response => response.json())\n    //     .then(result => {\n        \n    //      localStorage.setItem('token', result.token)\n        \n    //     setUser(result.data)\n    //     localStorage.setItem('firstname', result.data.firstname )\n    //     localStorage.setItem('lastname',result.data.lastname)\n    //     localStorage.setItem('userID', result.data.userID)\n\n        \n    //     const firstname = localStorage.getItem('firstname')\n    //     const lastname = localStorage.getItem('lastname')\n        \n    //     setServerMessage(result.message)\n    //     router.push(`/${firstname}_${lastname}`)\n    //    })\n    //     .catch(err=>{\n    //         setServerMessage(err.message)\n    //     })\n        //     const result = response.json()\n        //     console.log(result)\n        //     await localStorage.setItem('token', result.data.token)\n        //     await localStorage.setItem('user', result.data.user)\n        //     setServerMessage(result.data.message)\n        //     router.push(`/:${user.name}`)\n        //   }catch(err){\n        //     setServerMessage(err.message)\n        //   }\n         \n    }\n\n    // const get_single_route = (routeId) =>{\n\n    //     console.log(routeId)\n\n    //     let url = `https://backend.cruise9ja.com/api/v1/routes/${abuwala1}`\n    //     fetch(url)\n    //       .then(response => response.json())\n    //       .then(data => {\n    //           console.log(data)\n    //           setSingle_route([...data.result])\n    //           console.log(single_route)\n    //       })\n    //       .catch(err => {\n    //           setErrorMessage(err.message)\n              \n    //         })\n    //     // const router = useRouter()\n    //     // router.push('/searchresults')\n    // }\n\n    const value = {\n        user,\n        sign_in,\n        sign_up,\n        serverMessage,\n        isLoading\n    }\n\n    return (\n        <>\n            <AuthContext.Provider value={value}>\n               {children}\n            </AuthContext.Provider>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}