{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/oche/Projects/Targetometer/Client/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/oche/Projects/Targetometer/Client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/oche/Projects/Targetometer/Client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/oche/Projects/Targetometer/Client/context/AuthContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState } from \"react\";\nimport { useRouter } from 'next/router';\nimport axios from \"axios\";\nvar AuthContextDefaultValues = {\n  user: []\n};\nvar AuthContext = /*#__PURE__*/createContext(AuthContextDefaultValues);\n_c = AuthContext;\nvar BASE_URL = 'https://targetometer-server.herokuapp.com/api/v1/auth';\nexport function useAuth() {\n  _s();\n\n  return useContext(AuthContext);\n}\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function AuthProvider(_ref) {\n  _s2();\n\n  var children = _ref.children;\n\n  var _useState = useState([]),\n      user = _useState[0],\n      setUser = _useState[1]; // const [single_route, setSingle_route] = useState([])\n\n\n  var _useState2 = useState(''),\n      serverMessage = _useState2[0],\n      setServerMessage = _useState2[1];\n\n  var sign_up = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(email, password, firstname, lastname, confirmpassword) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"\".concat(BASE_URL, \"/createaccount\"), _defineProperty({\n                firstname: firstname,\n                lastname: lastname,\n                email: email,\n                password: password\n              }, \"password\", password));\n\n            case 3:\n              response = _context.sent;\n              setServerMessage(response.message);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              setServerMessage(_context.t0.message);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function sign_up(_x, _x2, _x3, _x4, _x5) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var sign_in = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post(\"\".concat(BASE_URL, \"/signin\"), _defineProperty({\n                email: email,\n                password: password\n              }, \"password\", password));\n\n            case 3:\n              response = _context2.sent;\n              setServerMessage(response.message);\n              router.push(\"/:\".concat(user.name));\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              setServerMessage(_context2.t0.message);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8]]);\n    }));\n\n    return function sign_in(_x6, _x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // const get_single_route = (routeId) =>{\n  //     console.log(routeId)\n  //     let url = `https://backend.cruise9ja.com/api/v1/routes/${abuwala1}`\n  //     fetch(url)\n  //       .then(response => response.json())\n  //       .then(data => {\n  //           console.log(data)\n  //           setSingle_route([...data.result])\n  //           console.log(single_route)\n  //       })\n  //       .catch(err => {\n  //           setErrorMessage(err.message)\n  //         })\n  //     // const router = useRouter()\n  //     // router.push('/searchresults')\n  // }\n\n\n  var value = {\n    user: user,\n    sign_in: sign_in,\n    sign_up: sign_up,\n    serverMessage: serverMessage\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s2(AuthProvider, \"Kxj3L0NW8IkvdvsE2MmPkrvbN8c=\");\n\n_c2 = AuthProvider;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AuthContext\");\n$RefreshReg$(_c2, \"AuthProvider\");","map":{"version":3,"sources":["/Users/oche/Projects/Targetometer/Client/context/AuthContext.js"],"names":["createContext","useContext","useState","useRouter","axios","AuthContextDefaultValues","user","AuthContext","BASE_URL","useAuth","AuthProvider","children","setUser","serverMessage","setServerMessage","sign_up","email","password","firstname","lastname","confirmpassword","post","response","message","sign_in","router","push","name","value"],"mappings":";;;;;;;;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,QAApC,QAAoD,OAApD;AACA,SAAQC,SAAR,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,IAAMC,wBAAwB,GAAC;AAC3BC,EAAAA,IAAI,EAAC;AADsB,CAA/B;AAKA,IAAMC,WAAW,gBAAGP,aAAa,CAACK,wBAAD,CAAjC;KAAME,W;AAEN,IAAMC,QAAQ,GAAG,uDAAjB;AACA,OAAO,SAASC,OAAT,GAAkB;AAAA;;AACrB,SAAOR,UAAU,CAACM,WAAD,CAAjB;AACH;;GAFeE,O;;AAIhB,OAAO,SAASC,YAAT,OAAiC;AAAA;;AAAA,MAAVC,QAAU,QAAVA,QAAU;;AAAA,kBACZT,QAAQ,CAAC,EAAD,CADI;AAAA,MAC7BI,IAD6B;AAAA,MACvBM,OADuB,iBAEpC;;;AAFoC,mBAGMV,QAAQ,CAAC,EAAD,CAHd;AAAA,MAG7BW,aAH6B;AAAA,MAGdC,gBAHc;;AAIpC,MAAMC,OAAO;AAAA,yEAAG,iBAAOC,KAAP,EAAcC,QAAd,EAAwBC,SAAxB,EAAmCC,QAAnC,EAA6CC,eAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEehB,KAAK,CAACiB,IAAN,WAClBb,QADkB;AAGnBU,gBAAAA,SAAS,EAACA,SAHS;AAInBC,gBAAAA,QAAQ,EAAEA,QAJS;AAKnBH,gBAAAA,KAAK,EAAEA,KALY;AAMnBC,gBAAAA,QAAQ,EAARA;AANmB,6BAMTA,QANS,EAFf;;AAAA;AAEFK,cAAAA,QAFE;AAURR,cAAAA,gBAAgB,CAACQ,QAAQ,CAACC,OAAV,CAAhB;AAVQ;AAAA;;AAAA;AAAA;AAAA;AAaRT,cAAAA,gBAAgB,CAAC,YAAIS,OAAL,CAAhB;;AAbQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPR,OAAO;AAAA;AAAA;AAAA,KAAb;;AAgBA,MAAMS,OAAO;AAAA,yEAAG,kBAAMR,KAAN,EAAaC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEeb,KAAK,CAACiB,IAAN,WAClBb,QADkB;AAGnBQ,gBAAAA,KAAK,EAAEA,KAHY;AAInBC,gBAAAA,QAAQ,EAARA;AAJmB,6BAITA,QAJS,EAFf;;AAAA;AAEFK,cAAAA,QAFE;AAQRR,cAAAA,gBAAgB,CAACQ,QAAQ,CAACC,OAAV,CAAhB;AACAE,cAAAA,MAAM,CAACC,IAAP,aAAiBpB,IAAI,CAACqB,IAAtB;AATQ;AAAA;;AAAA;AAAA;AAAA;AAYRb,cAAAA,gBAAgB,CAAC,aAAIS,OAAL,CAAhB;;AAZQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPC,OAAO;AAAA;AAAA;AAAA,KAAb,CApBoC,CAqCpC;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AAEA,MAAMI,KAAK,GAAG;AACVtB,IAAAA,IAAI,EAAJA,IADU;AAEVkB,IAAAA,OAAO,EAAPA,OAFU;AAGVT,IAAAA,OAAO,EAAPA,OAHU;AAIVF,IAAAA,aAAa,EAAbA;AAJU,GAAd;AAOA,sBACI;AAAA,2BACI,QAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAEe,KAA7B;AAAA,gBACKjB;AADL;AAAA;AAAA;AAAA;AAAA;AADJ,mBADJ;AAOH;;IAvEeD,Y;;MAAAA,Y","sourcesContent":["import { createContext, useContext, useState } from \"react\";\nimport {useRouter} from 'next/router'\nimport axios from \"axios\";\nconst AuthContextDefaultValues={\n    user:[],\n    \n}\n\nconst AuthContext = createContext(AuthContextDefaultValues)\n\nconst BASE_URL = 'https://targetometer-server.herokuapp.com/api/v1/auth'\nexport function useAuth(){\n    return useContext(AuthContext)\n}\n\nexport function AuthProvider({children}){\n    const [user, setUser] = useState([])\n    // const [single_route, setSingle_route] = useState([])\n    const [serverMessage, setServerMessage] = useState('')\n    const sign_up = async (email, password, firstname, lastname, confirmpassword) =>{\n        try{\n            const response = await axios.post(\n              `${BASE_URL}/createaccount`,\n              {\n                firstname:firstname,\n                lastname: lastname,\n                email: email,\n                password, password,\n              })\n            setServerMessage(response.message)\n            \n          }catch(err){\n            setServerMessage(err.message)\n          }\n    }\n    const sign_in = async(email, password) =>{\n        try{\n            const response = await axios.post(\n              `${BASE_URL}/signin`,\n              {\n                email: email,\n                password, password,\n              })\n            setServerMessage(response.message)\n            router.push(`/:${user.name}`)\n            \n          }catch(err){\n            setServerMessage(err.message)\n          } \n        \n    }\n\n    // const get_single_route = (routeId) =>{\n\n    //     console.log(routeId)\n\n    //     let url = `https://backend.cruise9ja.com/api/v1/routes/${abuwala1}`\n    //     fetch(url)\n    //       .then(response => response.json())\n    //       .then(data => {\n    //           console.log(data)\n    //           setSingle_route([...data.result])\n    //           console.log(single_route)\n    //       })\n    //       .catch(err => {\n    //           setErrorMessage(err.message)\n              \n    //         })\n    //     // const router = useRouter()\n    //     // router.push('/searchresults')\n    // }\n\n    const value = {\n        user,\n        sign_in,\n        sign_up,\n        serverMessage\n    }\n\n    return (\n        <>\n            <AuthContext.Provider value={value}>\n                {children}\n            </AuthContext.Provider>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}