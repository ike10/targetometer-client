{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/oche/Projects/Targetometer/Client/context/AuthContext.js\";\nimport { createContext, useContext, useState } from \"react\";\nimport router, { useRouter } from 'next/router';\nimport axios from \"axios\";\nconst AuthContextDefaultValues = {\n  user: []\n};\nconst AuthContext = /*#__PURE__*/createContext(AuthContextDefaultValues);\nconst BASE_URL = 'https://targetometer-server.herokuapp.com/api/v1/auth';\nconst USER_URL = 'https://targetometer-server.herokuapp.com/api/v1/users';\nexport function useAuth() {\n  return useContext(AuthContext);\n}\nexport function AuthProvider({\n  children\n}) {\n  const {\n    0: user,\n    1: setUser\n  } = useState([]);\n  const {\n    0: userInfo,\n    1: setUserInfo\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false); // const [single_route, setSingle_route] = useState([])\n\n  const {\n    0: serverMessage,\n    1: setServerMessage\n  } = useState('');\n\n  const sign_up = async (email, password, firstname, lastname, confirmpassword) => {\n    try {\n      const reg = new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[-+_!@#$%^&*.,?]).+$\");\n      const test = reg.test(password);\n      console.log(test);\n\n      if (test) {\n        setIsLoading(true);\n        let response = await fetch(`${BASE_URL}/createaccount`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n          },\n          body: JSON.stringify({\n            firstname: firstname,\n            lastname: lastname,\n            password: password,\n            email: email\n          })\n        });\n        const result = await response.json(); // console.log(result)\n\n        return setServerMessage(\"Account Created Successfully, please verify email\");\n        setTimeout(() => {\n          router.push(`/verifyuser`);\n        }, 30000);\n      } else {\n        return setServerMessage(\"password is not complete\");\n      }\n    } catch (err) {\n      setServerMessage(\"Welcome\");\n      setIsLoading(false);\n      console.log(err.message);\n    } //     fetch(`${BASE_URL}/createaccount`, {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //             // 'Content-Type': 'application/x-www-form-urlencoded',\n    //           },\n    //         body: JSON.stringify({\n    //             firstname: firstname,\n    //             lastname: lastname,\n    //             password: password,\n    //             email:email, \n    //         })\n    //     })\n    //     .then(response => response.json())\n    //     .then(data => {\n    //     setServerMessage(\"Account Created Successfully, please login to access dashboard\")\n    //     setTimeout(()=>{\n    //         router.push(`/`)\n    //     }, 30000)\n    //    })\n    //     .catch(err=>{\n    //         setServerMessage(err.message)\n    //     })\n\n  }; // verify account\n\n\n  const verify_user = async otp => {\n    setServerMessage(\"Email has been verified please login\");\n    router.push('/'); // try{\n    //    setIsLoading(true)\n    //    let response = await fetch(`${BASE_URL}/verifyaccount`, {\n    //     method: 'PUT',\n    //     headers: {\n    //         'Content-Type': 'application/json'\n    //         // 'Content-Type': 'application/x-www-form-urlencoded',\n    //       },\n    //     body: JSON.stringify({\n    //         token: otp,\n    //    })\n    // })\n    // setServerMessage('Email Verified Please Login')\n    //     router.push(`/`)\n    // }catch(error){\n    //     console.log(error.message)\n    //     setServerMessage(\"Error verifiying token\") \n    //    setIsLoading(false) \n    // }\n  };\n\n  const sign_in = async (email, password) => {\n    try {\n      setIsLoading(true);\n      let response = await fetch(`${BASE_URL}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n        },\n        body: JSON.stringify({\n          password: password,\n          email: email\n        })\n      });\n      const result = await response.json(); // console.log(result)\n\n      localStorage.setItem('token', result.token);\n      setUser(result.data);\n      localStorage.setItem('userinfo', JSON.stringify(result.data));\n      localStorage.setItem('firstname', result.data.firstname);\n      localStorage.setItem('lastname', result.data.lastname);\n      localStorage.setItem('userID', result.data.userID);\n      const firstname = localStorage.getItem('firstname');\n      const lastname = localStorage.getItem('lastname');\n      setServerMessage(result.message);\n      router.push(`/${firstname}_${lastname}`);\n    } catch (err) {\n      setServerMessage(err.message);\n      setIsLoading(false);\n    }\n  };\n\n  const get_user = () => {\n    const userID = localStorage.getItem('userID');\n    const token = localStorage.getItem('token');\n    fetch(`${USER_URL}/${userID}/`, {\n      method: 'GET',\n      headers: {\n        // 'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}` // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      }\n    }).then(response => response.json()).then(result => {\n      console.log(result.result);\n      setUser([...result.result]);\n    }).catch(error => {\n      console.log(error.message);\n      setServerMessage('');\n    });\n  };\n\n  const delete_user = () => {\n    const userID = localStorage.getItem('userID');\n    const token = localStorage.getItem('token');\n    fetch(`${USER_URL}/${userID}/`, {\n      method: 'DELETE',\n      headers: {\n        // 'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}` // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      }\n    }).then(response => response.json()).then(result => {\n      console.log(result.result);\n      setUser([...result.result]);\n    }).catch(error => {\n      setServerMessage(error.message);\n    });\n  };\n\n  const update_user = (profileimage, address, email, contact, occupation, password) => {\n    const userID = localStorage.getItem('userID');\n    const token = localStorage.getItem('token');\n    fetch(`${USER_URL}/${userID}/`, {\n      method: 'PUT',\n      // mode: \"no-cors\",\n      headers: {\n        // 'Content-Type': 'application/json',\n        'Content-Type': 'multipart/form-data',\n        'Authorization': `Bearer ${token}` // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: {\n        email: email,\n        profileimage: profileimage,\n        address: address,\n        contact: contact,\n        occupation: occupation,\n        password: password\n      }\n    }) // .then(response => response.json())\n    .then(result => {\n      setServerMessage(\"user profile updated\");\n      console.log(result.result);\n    }).catch(error => {\n      console.log(error.message);\n      setServerMessage('error updating user profile, please try again');\n    });\n  };\n\n  const value = {\n    user,\n    sign_in,\n    sign_up,\n    serverMessage,\n    isLoading,\n    verify_user,\n    setIsLoading,\n    setServerMessage,\n    get_user,\n    update_user,\n    delete_user // delete_user,\n\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"sources":["/Users/oche/Projects/Targetometer/Client/context/AuthContext.js"],"names":["createContext","useContext","useState","router","useRouter","axios","AuthContextDefaultValues","user","AuthContext","BASE_URL","USER_URL","useAuth","AuthProvider","children","setUser","userInfo","setUserInfo","isLoading","setIsLoading","serverMessage","setServerMessage","sign_up","email","password","firstname","lastname","confirmpassword","reg","RegExp","test","console","log","response","fetch","method","headers","body","JSON","stringify","result","json","setTimeout","push","err","message","verify_user","otp","sign_in","localStorage","setItem","token","data","userID","getItem","get_user","then","catch","error","delete_user","update_user","profileimage","address","contact","occupation","value"],"mappings":"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","sourcesContent":["import { createContext, useContext, useState } from \"react\";\nimport router, {useRouter} from 'next/router'\nimport axios from \"axios\";\nconst AuthContextDefaultValues={\n    user:[],\n \n   \n}\n\nconst AuthContext = createContext(AuthContextDefaultValues)\n\nconst BASE_URL = 'https://targetometer-server.herokuapp.com/api/v1/auth'\nconst USER_URL = 'https://targetometer-server.herokuapp.com/api/v1/users'\nexport function useAuth(){\n    return useContext(AuthContext)\n}\n\nexport function AuthProvider({children}){\n    const [user, setUser] = useState([])\n    \n    const [userInfo, setUserInfo] = useState([])\n    const [isLoading, setIsLoading] = useState(false)\n    // const [single_route, setSingle_route] = useState([])\n    const [serverMessage, setServerMessage] = useState('')\n    const sign_up =  async(email, password, firstname, lastname, confirmpassword) =>{\n        \n            try{\n                const reg =  new RegExp(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[-+_!@#$%^&*.,?]).+$\")\n                const test = reg.test(password) \n                console.log(test)\n                \n                if (test){\n                    setIsLoading(true)\n                    let response = await fetch(`${BASE_URL}/createaccount`, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                            // 'Content-Type': 'application/x-www-form-urlencoded',\n                          },\n                        body: JSON.stringify({\n                            firstname: firstname,\n                            lastname: lastname,\n                            password: password,\n                            email:email, \n                            \n                        })\n                   })\n                   const result = await response.json()\n                    // console.log(result)\n                   \n                   return setServerMessage(\"Account Created Successfully, please verify email\")\n                    setTimeout(()=>{\n                                router.push(`/verifyuser`)\n                           }, 30000)\n                }else{\n                    return setServerMessage(\"password is not complete\")\n                }\n                    \n                          \n            }catch(err){\n                setServerMessage(\"Welcome\")\n                setIsLoading(false)\n                console.log(err.message)\n            }\n        \n        \n\n    //     fetch(`${BASE_URL}/createaccount`, {\n    //         method: 'POST',\n    //         headers: {\n    //             'Content-Type': 'application/json'\n    //             // 'Content-Type': 'application/x-www-form-urlencoded',\n    //           },\n    //         body: JSON.stringify({\n    //             firstname: firstname,\n    //             lastname: lastname,\n    //             password: password,\n    //             email:email, \n                \n    //         })\n    //     })\n    //     .then(response => response.json())\n    //     .then(data => {\n           \n    //     setServerMessage(\"Account Created Successfully, please login to access dashboard\")\n    //     setTimeout(()=>{\n    //         router.push(`/`)\n    //     }, 30000)\n        \n    //    })\n    //     .catch(err=>{\n    //         setServerMessage(err.message)\n    //     })\n    }\n// verify account\n    const verify_user = async (otp) => {\n        setServerMessage(\"Email has been verified please login\")\n        router.push('/')\n        // try{\n        //    setIsLoading(true)\n        //    let response = await fetch(`${BASE_URL}/verifyaccount`, {\n        //     method: 'PUT',\n        //     headers: {\n        //         'Content-Type': 'application/json'\n        //         // 'Content-Type': 'application/x-www-form-urlencoded',\n        //       },\n        //     body: JSON.stringify({\n                \n        //         token: otp,\n               \n               \n        //    })\n        // })\n        \n        // setServerMessage('Email Verified Please Login')\n        \n        //     router.push(`/`)\n       \n        \n        // }catch(error){\n        //     console.log(error.message)\n        //     setServerMessage(\"Error verifiying token\") \n        //    setIsLoading(false) \n           \n        // }\n    }\n\n    const sign_in = async (email, password) =>{\n\n       try{\n        setIsLoading(true)\n            let response = await fetch(`${BASE_URL}/login`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                    // 'Content-Type': 'application/x-www-form-urlencoded',\n                  },\n                body: JSON.stringify({\n                    \n                    password: password,\n                    email:email, \n                   \n               })\n            })\n            \n            const result = await response.json()\n            // console.log(result)\n           \n            localStorage.setItem('token', result.token)\n        \n            setUser(result.data)\n           localStorage.setItem('userinfo', JSON.stringify(result.data))\n        \n            localStorage.setItem('firstname', result.data.firstname )\n            localStorage.setItem('lastname',result.data.lastname)\n            localStorage.setItem('userID', result.data.userID)\n    \n            \n            const firstname = localStorage.getItem('firstname')\n            const lastname = localStorage.getItem('lastname')\n            \n            setServerMessage(result.message)\n            router.push(`/${firstname}_${lastname}`)\n       } catch(err){\n        setServerMessage(err.message) \n        setIsLoading(false)\n       }\n    }\n\n    const get_user = ()=>{\n        const userID = localStorage.getItem('userID')\n        const token = localStorage.getItem('token')\n        \n        fetch(`${USER_URL}/${userID}/`, {\n            method: 'GET',\n            headers: {\n                // 'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`,\n               // 'Content-Type': 'application/x-www-form-urlencoded',\n              }\n        })\n        .then(response=>response.json())\n        .then(result => {\n            console.log(result.result)\n            setUser([...result.result])\n           \n        })\n        .catch(error => {\n            console.log(error.message)\n            setServerMessage('')\n    })\n}\nconst delete_user = ()=>{\n    const userID = localStorage.getItem('userID')\n    const token = localStorage.getItem('token')\n    \n    fetch(`${USER_URL}/${userID}/`, {\n        method: 'DELETE',\n        headers: {\n            // 'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n           // 'Content-Type': 'application/x-www-form-urlencoded',\n          }\n    })\n    .then(response=>response.json())\n    .then(result => {\n        console.log(result.result)\n        setUser([...result.result])\n    })\n    .catch(error => {\n        setServerMessage(error.message)\n})\n}\n\nconst update_user = (profileimage, address,email, contact, occupation, password) =>{\n    const userID = localStorage.getItem('userID')\n    const token = localStorage.getItem('token')\n    \n    fetch(`${USER_URL}/${userID}/`, {\n        method: 'PUT',\n        // mode: \"no-cors\",\n        headers: {\n            // 'Content-Type': 'application/json',\n            'Content-Type':'multipart/form-data',\n            'Authorization': `Bearer ${token}`,\n            // 'Content-Type': 'application/x-www-form-urlencoded',\n          },\n        body: {\n            email: email,\n            profileimage: profileimage,\n            address:address, \n            contact: contact,\n            occupation: occupation,\n            password: password\n        }\n    })\n    // .then(response => response.json())\n    .then((result)=>{\n        setServerMessage(\"user profile updated\")\n        console.log(result.result)\n    })\n    .catch(error => {\n        console.log(error.message)\n        setServerMessage('error updating user profile, please try again')\n    })\n}\n\n\n\n  \n\n    const value = {\n        user,\n        sign_in,\n        sign_up,\n        serverMessage,\n       isLoading,\n        verify_user,\n        setIsLoading,\n        setServerMessage,\n        get_user,\n        update_user,\n        delete_user\n        // delete_user,\n    }\n\n    return (\n        <>\n            <AuthContext.Provider value={value}>\n               {children}\n            </AuthContext.Provider>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}